<style>
  .query-post {
    line-height: 1.8;
  }
  .query-post h2 {
    margin-top: 32px;
    padding-bottom: 8px;
    border-bottom: 2px solid #333;
  }
  .query-post h3 {
    margin-top: 24px;
    color: #1976D2;
  }
  .query-post .situation-box {
    background: #fff3e0;
    border-left: 4px solid #FF9800;
    padding: 16px;
    margin: 16px 0;
    border-radius: 0 8px 8px 0;
  }
  .query-post .code-block {
    background: #263238;
    color: #aed581;
    padding: 16px;
    border-radius: 8px;
    font-family: 'Courier New', monospace;
    overflow-x: auto;
    margin: 12px 0;
  }
  .query-post .result-box {
    background: #e8f5e9;
    border-left: 4px solid #4CAF50;
    padding: 16px;
    margin: 16px 0;
    border-radius: 0 8px 8px 0;
  }
  .query-post .insight-box {
    background: #e3f2fd;
    border-left: 4px solid #2196F3;
    padding: 16px;
    margin: 16px 0;
    border-radius: 0 8px 8px 0;
  }
  .query-post .warning-box {
    background: #ffebee;
    border-left: 4px solid #f44336;
    padding: 16px;
    margin: 16px 0;
    border-radius: 0 8px 8px 0;
  }
  .query-post .tip-box {
    background: #f3e5f5;
    border-left: 4px solid #9C27B0;
    padding: 16px;
    margin: 16px 0;
    border-radius: 0 8px 8px 0;
  }
  .query-post table {
    width: 100%;
    border-collapse: collapse;
    margin: 16px 0;
  }
  .query-post th, .query-post td {
    border: 1px solid #ddd;
    padding: 12px;
    text-align: left;
  }
  .query-post th {
    background: #f5f5f5;
  }
  .query-post .dialogue {
    background: #fafafa;
    padding: 12px 16px;
    border-radius: 8px;
    margin: 12px 0;
    font-style: italic;
  }
</style>

<div class="query-post">

<p><strong>인사이트 포스트(위고비 파헤치기)에서 주장한 숫자들. 이게 어디서 나온 건지 SQL로 검증해본다.</strong></p>

<h2>검증할 인사이트 목록</h2>

<table>
  <tr><th>#</th><th>주장</th><th>출처 테이블</th></tr>
  <tr><td>1</td><td>위고비 끊으면 <strong>67%</strong> 요요</td><td>yoyo_rates</td></tr>
  <tr><td>2</td><td>운동만 하면 <strong>25%</strong> 요요</td><td>yoyo_rates</td></tr>
  <tr><td>3</td><td>약물 감량의 <strong>45%</strong>가 근육</td><td>muscle_loss</td></tr>
  <tr><td>4</td><td>Gilead 매출 <strong>80%</strong> 감소</td><td>gilead_hcv_case</td></tr>
  <tr><td>5</td><td>2년 후 <strong>85%</strong>가 약 중단</td><td>drug_persistence</td></tr>
</table>

<h2>인사이트 #1: 위고비 끊으면 67% 요요</h2>

<div class="situation-box">
  <strong>주장:</strong> "먹으면 살 빠지고, 끊으면 67% 돌아온다"<br>
  <strong>검증:</strong> 진짜 67%야? 어떤 조건에서?
</div>

<h3>쿼리</h3>

<div class="code-block">
SELECT method, timeframe, weight_regain_percent, study_name, year<br>
FROM yoyo_rates<br>
WHERE method LIKE 'GLP-1%'<br>
  AND timeframe LIKE '%1년%';
</div>

<div class="result-box">
  <table>
    <tr><th>method</th><th>timeframe</th><th>요요율</th><th>출처</th></tr>
    <tr><td>GLP-1 약물만</td><td>중단 후 1년</td><td><strong>67%</strong></td><td>STEP 1 Extension (2022)</td></tr>
  </table>
</div>

<div class="insight-box">
  <strong>검증 완료:</strong> 67%는 STEP 1 Extension 연구에서 나온 숫자.<br>
  "17.3% 감량 후 11.6%p 회복 = 약 67%" → 계산도 맞음.
</div>

<h2>인사이트 #2: 운동만 하면 25% 요요</h2>

<div class="situation-box">
  <strong>주장:</strong> "운동만 하면 요요율 25%"<br>
  <strong>비교:</strong> 67% vs 25% = 2.7배 차이라고 했는데, 진짜?
</div>

<h3>쿼리: 비교</h3>

<div class="code-block">
SELECT method, weight_regain_percent,<br>
  ROUND(weight_regain_percent / 25.0, 1) AS vs_exercise<br>
FROM yoyo_rates<br>
WHERE timeframe LIKE '%1년%'<br>
ORDER BY weight_regain_percent DESC;
</div>

<div class="result-box">
  <table>
    <tr><th>method</th><th>요요율</th><th>운동 대비 배수</th></tr>
    <tr><td>Liraglutide</td><td>70%</td><td>2.8배</td></tr>
    <tr><td>GLP-1 약물만</td><td>67%</td><td><strong>2.7배</strong></td></tr>
    <tr><td>GLP-1+운동 병행</td><td>40%</td><td>1.6배</td></tr>
    <tr><td>운동만</td><td><strong>25%</strong></td><td>1.0배 (기준)</td></tr>
  </table>
</div>

<div class="tip-box">
  <strong>SQL 팁:</strong> <code>ROUND(a / b, 1)</code>로 배수 계산. 비교 대상을 기준(1.0)으로 두면 직관적.
</div>

<h2>인사이트 #3: 약물 감량의 45%가 근육</h2>

<div class="situation-box">
  <strong>주장:</strong> "감량 중 45%가 근육"<br>
  <strong>의문:</strong> 모든 약물이 그런가? 운동하면 다른가?
</div>

<h3>쿼리</h3>

<div class="code-block">
SELECT method, weight_loss_kg, lean_mass_loss_kg,<br>
  lean_mass_loss_percent AS muscle_loss_pct,<br>
  CASE<br>
    WHEN lean_mass_loss_percent >= 40 THEN 'HIGH'<br>
    WHEN lean_mass_loss_percent >= 20 THEN 'MID'<br>
    ELSE 'LOW'<br>
  END AS risk_level<br>
FROM muscle_loss<br>
ORDER BY lean_mass_loss_percent DESC;
</div>

<div class="result-box">
  <table>
    <tr><th>method</th><th>총 감량</th><th>근손실</th><th>비율</th><th>위험도</th></tr>
    <tr><td>Semaglutide (STEP 1)</td><td>15.3kg</td><td>6.92kg</td><td><strong>45.2%</strong></td><td>HIGH</td></tr>
    <tr><td>Semaglutide (일반)</td><td>10kg</td><td>3.9kg</td><td>39%</td><td>MID</td></tr>
    <tr><td>GLP-1 일반</td><td>10kg</td><td>2.6kg</td><td>26%</td><td>MID</td></tr>
    <tr><td>식단만</td><td>10kg</td><td>2.5kg</td><td>25%</td><td>MID</td></tr>
    <tr><td>식단+근력운동</td><td>10kg</td><td>1.0kg</td><td><strong>10%</strong></td><td>LOW</td></tr>
  </table>
</div>

<div class="insight-box">
  <strong>검증 완료:</strong> 45%는 STEP 1 연구 데이터. 최악의 케이스.<br>
  운동 병행하면 10%까지 줄일 수 있음. <strong>4.5배 차이.</strong>
</div>

<div class="tip-box">
  <strong>SQL 팁:</strong> <code>CASE WHEN</code>으로 범주 만들기. 숫자만 나열하면 의미 파악 어려움.
</div>

<h2>인사이트 #4: Gilead 매출 80% 감소</h2>

<div class="situation-box">
  <strong>주장:</strong> "완치 약물 만들었더니 매출 80% 감소"<br>
  <strong>의문:</strong> 진짜야? 몇 년 만에?
</div>

<h3>쿼리</h3>

<div class="code-block">
SELECT year, revenue_billion, change_description,<br>
  ROUND((19.1 - revenue_billion) / 19.1 * 100, 1) AS drop_from_peak<br>
FROM gilead_hcv_case<br>
ORDER BY year;
</div>

<div class="result-box">
  <table>
    <tr><th>연도</th><th>매출(B)</th><th>변화</th><th>정점 대비</th></tr>
    <tr><td>2015</td><td>$19.1B</td><td>정점</td><td>0%</td></tr>
    <tr><td>2017</td><td>$9.1B</td><td>절반</td><td>-52.4%</td></tr>
    <tr><td>2020</td><td>$2.5B</td><td>급감</td><td><strong>-86.9%</strong></td></tr>
  </table>
</div>

<div class="warning-box">
  <strong>검증 완료:</strong> 80%가 아니라 <strong>87%</strong> 감소.<br>
  "완치 약물 = 고객 소멸" 명제가 데이터로 증명됨.
</div>

<h2>인사이트 #5: 2년 후 85%가 약 중단</h2>

<div class="situation-box">
  <strong>주장:</strong> "2년 후 85%가 약을 끊는다"<br>
  <strong>의문:</strong> 정확한 숫자? 약마다 다른가?
</div>

<h3>쿼리</h3>

<div class="code-block">
SELECT drug, timeframe, persistence_rate_percent,<br>
  100 - persistence_rate_percent AS discontinue_rate<br>
FROM drug_persistence<br>
WHERE timeframe = '2년'<br>
ORDER BY persistence_rate_percent DESC;
</div>

<div class="result-box">
  <table>
    <tr><th>약물</th><th>기간</th><th>지속률</th><th>중단률</th></tr>
    <tr><td>Wegovy</td><td>2년</td><td>24%</td><td>76%</td></tr>
    <tr><td>Ozempic</td><td>2년</td><td>22%</td><td>78%</td></tr>
    <tr><td>GLP-1 전체</td><td>2년</td><td>15%</td><td><strong>85%</strong></td></tr>
  </table>
</div>

<div class="insight-box">
  <strong>검증 완료:</strong> 85%는 GLP-1 전체 평균.<br>
  개별 약물(Wegovy 76%, Ozempic 78%)보다 전체 평균이 더 높음 = 다른 약물 포함.
</div>

<h2>종합: 인사이트 → 쿼리 → 검증</h2>

<table>
  <tr><th>인사이트</th><th>주장</th><th>검증 결과</th><th>판정</th></tr>
  <tr><td>#1</td><td>요요 67%</td><td>67% (STEP 1)</td><td>O</td></tr>
  <tr><td>#2</td><td>운동 25%</td><td>25% (S-LiTE)</td><td>O</td></tr>
  <tr><td>#3</td><td>근손실 45%</td><td>45.2% (STEP 1)</td><td>O</td></tr>
  <tr><td>#4</td><td>Gilead -80%</td><td>-86.9%</td><td>O (더 심함)</td></tr>
  <tr><td>#5</td><td>중단률 85%</td><td>85% (GLP-1 전체)</td><td>O</td></tr>
</table>

<div class="tip-box">
  <strong>결론:</strong> 인사이트 포스트의 모든 숫자가 DB에서 검증됨.<br>
  "운동은 보험이다"는 감이 아니라 <strong>데이터</strong>다.
</div>

<h2>이번에 쓴 SQL 정리</h2>

<table>
  <tr><th>문법</th><th>용도</th><th>예시</th></tr>
  <tr><td>LIKE '%문자%'</td><td>부분 매칭</td><td>WHERE method LIKE 'GLP-1%'</td></tr>
  <tr><td>ROUND(a/b, n)</td><td>비율 계산</td><td>ROUND(67/25.0, 1) = 2.7</td></tr>
  <tr><td>CASE WHEN</td><td>범주화</td><td>HIGH/MID/LOW 분류</td></tr>
  <tr><td>ORDER BY DESC</td><td>정렬</td><td>높은 순 정렬</td></tr>
  <tr><td>계산 컬럼</td><td>파생값</td><td>100 - persistence_rate</td></tr>
</table>

<h2>배운 점</h2>

<div class="insight-box">
  <strong>1. 주장 먼저, 쿼리 나중</strong><br>
  "뭘 증명하고 싶은지"가 먼저. 쿼리는 도구일 뿐.<br><br>

  <strong>2. 숫자의 맥락을 찾아라</strong><br>
  67%가 "어떤 조건에서" 나온 건지 확인해야 함. (중단 후 1년, STEP 1)<br><br>

  <strong>3. 비교 대상을 만들어라</strong><br>
  67% 혼자 있으면 의미 없음. 운동 25%랑 비교해야 "2.7배"가 나옴.<br><br>

  <strong>4. 검증이 스토리를 강화한다</strong><br>
  "운동이 좋다"(감) → "요요율 2.7배 차이"(팩트)
</div>

</div>
